<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Events | Graphics Team</title>
    <link rel="icon" href="{% static 'logos/logo.gif' %}"/>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="{% static 'newTable.css' %}" type="text/css" />

    {% block common_css %}
        {% include "common_css.html" %}
    {% endblock common_css %}
    <style>
        body, html {
        
        margin: 0;
        
        align-items: center;
        justify-content: center;
        }

        .row {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        }
        /* Styles for the lightbox overlay */
        .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 999;
        }
        .row {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
          }
          .btn-container {
            text-align: center;
          }
          
          .btn {
            max-width: 100%;
            width: auto;
            display: inline-block;
            white-space: normal; /* Allow text to wrap within the button */
            word-wrap: break-word; /* Break long words if necessary */
            font-size: 16px; /* Adjust the font size as needed */
          }
          
          /* Media query for smaller screens (adjust the breakpoint as needed) */
          @media (max-width: 768px) {
            .btn {
              width: 100%; /* Make the button full width on smaller screens */
            }
          }

          @import url('https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese');
          
          .upload__box {
            padding: 40px;
          }
          .upload__inputfile {
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            z-index: -1;
          }
          .upload__btn {
            display: inline-block;
            font-weight: 600;
            color: #fff;
            text-align: center;
            min-width: 116px;
            padding-top: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid;
            background-color: #00629B;
            border-color: #00629B;
            border-radius: 10px;
            line-height: 15px;
            font-size: 14px;
          }
          .upload__btn:hover {
            background-color: unset;
            color: #4045ba;
            transition: all 0.3s ease;
          }
          .upload__btn-box {
            margin-bottom: 10px;
          }
          .upload__img-wrap {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
          }
          .upload__img-box {
            width: 200px;
            height:200px;
            padding: 0 10px;
            margin-bottom: 12px;
          }
          .upload__img-close {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: center;
            line-height: 24px;
            z-index: 1;
            cursor: pointer;
          }
          .upload__img-close:after {
            content: "âœ–";
            font-size: 14px;
            color: white;
          }
          
          .img-bg {
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            position: relative;
            padding-bottom: 100%;
          }
          #image-preview {
            max-width: 100%;
            height:auto;
            cursor: pointer;
            transition: opacity 0.3s ease-in-out; /* Add a smooth transition effect */
        }

        #image-preview:hover {
            opacity: 0.7; /* Lower the opacity on hover */
        }

        #file-input {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        .btn.btn-primary {
          max-width: 100%; /* Set the maximum width to 100% */
          width: auto; /* Allow the width to adjust */
          display: inline-block;
          white-space: normal; /* Allow text to wrap within the button */
          word-wrap: break-word; /* Break long words if necessary */
          font-size: 16px; /* Adjust the font size as needed */
      }

      @media (max-width: 768px) {
        .btn.btn-primary {
            width: 100%; /* Make the button full width on smaller screens */
        }
    }
    
          
          

        
    </style>
</head>
<body>
<!-- ############ LAYOUT START-->
<div class="app" id="app">

    <!-- aside -->
    <div id="aside" class="app-aside modal nav-dropdown">

          {% block sidebar %}
            {% include 'users/sidebar.html' %}
          {% endblock %}

    </div>
    <!-- aside end -->
    <!-- navbar content -->
    <div id="content" class="app-content box-shadow-z0" role="main">
        {% block navbar %}
            {% include 'graphics_navbar.html' %}
        {% endblock navbar %}

    </div>
    <!--navbar content-->
    <!-- ############ PAGE START-->
    <div ui-view class="app-body" style="justify-content:center; margin-left:15%; margin-right:15%;" id="view">


        <br>
        <h2 style="justify-content:center;text-align:center;margin-bottom:15px;"> <span style="color:#00629B;">{{event_name}}</b></span></h2>
        
        <ol style="justify-content:center;margin-bottom:15px;"><b>
          <li>Provide the Links of the folder for the Banner Images </li>
          <li>If the banner picture is already uploaded, change it by clicking on the image.
            Select the desired picture and hit <span style="color:blue;">'Change'</span> to confirm.</li>
          <li>To change link use the 'Update' button. Use the 'Change' button for updating picture</li>
        </ol></b>
        

        <div style="text-align:center; margin-top=30px;">  
            <div class="container" style="justify-content:center;">
              
              </ul>
              
                <br><br>
                   
                                        <div class="box-header">
                                            <h1 style="text-align:center;font-size:30px;">Add Details</h1>
                                        </div>
                                        
                                        <form method="POST" enctype="multipart/form-data">
                                            {% csrf_token %}
                                            <div class="box-body">
                                              
                                                    <div class="form-group row">
                                                        <label class="col-sm-2 form-control-label">Folder Drive Link for Banner Pictures</label>
                                                        <div class="col-sm-10">
                                                            <input
                                                            placeholder="Provide Drive Link for The Banner Pictures"
                                                            class="form-control"
                                                            type="url"
                                                            autocomplete="off"
                                                            required
                                                            id="#field1"
                                                            value="{{media_link}}"
                                                            name="drive_link_of_graphics"/>
                                
                                                        </div>
                                                    </div>
                                                    
                                                   {% if not image_exists %}
                                                    <div class="container" style="justify-content:center;">
                                                        <label class="form-group row"><b>Add Banner Image<b></label>
                                                                       
                                                                        <div class="upload__box">
                                                                            <div class="upload__btn-box">
                                                                              <label class="upload__btn">
                                                                                <p>Upload Image</p>
                                                                                <input type="file" id="fileInput" name="image" data-max_length="20" class="upload__inputfile">
                                                                              </label>
                                                                            </div>
                                                                            <div class="upload__img-wrap"></div>
                                                                          </div>
                                                         
                                                    </div>
                                                    {% endif %}
                                                    
                                          
                                                    <br>
                                                    <div class="footer" style="position:right;">
                                                        {% if not image_exists  %}
                                                        <button type="submit" name="add_banner_pic_and_link" class="btn btn-success p-x-md" value="Add">Add</button>
                                                        {% else %} 
                                                        <button type="submit" name="update_link" class="btn btn-success p-x-md" value="Add">Update</button>
                                                        {% endif %}

                                                    </div>  
                                                </div>
                                                
                                                
                                            </div>
                                        </form>
                                    
                               
                            
                        
                    
                        
            </div>
          </div>

         
        
    
    
    
    
    
        </div>


        <div style="text-align:center; margin-top=30px;">
          <div class="container">
            <div class="box-body" style="justify-content:center;margin-right:100px;margin-left:300px;">
            {% if image_exists %}
                                                  
                                                    <div class="form-group row">
                                                        
                                                        <div class="container" style="justify-content:center;">
                                                        
                                                        
                                                        <form method="POST" enctype="multipart/form-data">
                                                          {% csrf_token %}
                                                        <div class="container">
                                                            <img id="image-preview" src="{{media_url}}{{ Img.0.selected_image}}" alt="Image"  width=100% height=auto style="border: 2px solid black;on-hover: opacity;"  onclick="triggerFileInput(this)">
                                                            <input class="d-none" type="file"  id="file-input"   onchange="displayNewImage(this)" name="new_image">
                                                            <input type="hidden" value={{Img.0.id}} name="ImageID">
                                                            
                                                        </div>
                                                        <br>
                                                        <input type="submit" class="btn btn-primary p-x-md" name="submitted_changed_picture" value="Change">
                                                       
                                                        
                                                        
                                                        <br><br><br><br><br>
                                                      </form>  
                                                      
                                                     
                                                    
                                                        </div>
                                
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                  </div>
          </div>
        </div>
     <!--Theme Switcher-->

     {% block theme_switcher %}
        {% include "theme_switcher.html" %}
    {% endblock theme_switcher %}
  </div>


<!-- app end-->
{% block common_js %}
        {% include "common_js.html" %}
    {% endblock common_js %}
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'table_search.js'%}"></script> 
    <script src="{% static 'table_search.js'%}"></script>
    <!--Script for image previewing on modal-->
    <script>
      function removeImage(element) {
          var imgBox = $(element).closest('.upload__img-box');
          imgBox.remove();
          // Optionally, you may want to update the input field and perform other tasks here
      }
  
      jQuery(document).ready(function () {
          ImgUpload();
      });
  
      function ImgUpload() {
          $('.upload__inputfile').on('change', function (e) {
              var imgWrap = $(this).closest('.upload__box').find('.upload__img-wrap');
              var file = e.target.files[0];
  
              if (!file || !file.type.match('image.*')) {
                  return;
              }
  
              var reader = new FileReader();
              reader.onload = function (e) {
                  imgWrap.html(
                      "<div class='upload__img-box'>" +
                      "<div style='background-image: url(" + e.target.result + ")' class='img-bg'>" +
                      "<div class='upload__img-close' onclick='removeImage(this)'></div>" +
                      "</div></div>"
                  );
              };
              reader.readAsDataURL(file);
          });
      }
      function triggerFileInput(element) {
        element.nextElementSibling.click();
    }


      function displayNewImage(input) {
        var preview = input.previousElementSibling;
        var file = input.files[0];

        if (file) {
            var reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
            };

            reader.readAsDataURL(file);
        }
    }
  </script>
    
</body>
</html>