<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <h1>Renewal Session - {{ session_name }}</h1>
        <button><a href="{% url 'membership_development_team:renewal_form' session_id %}" class="log_in">View Renewal Form</a></button>
        <p>Form Link: {{ form_link }}</p>
        <h3>Renewal Applications</h3>
        <p>Applications Not viewed Yet: {{ notification_count }}</P>
        <p>Total Pending Applications: {{ pending_count }}</p>
        <p>Total Renewed Applications: {{ renewed_count }}</p>
        {% comment %} Search Functionality {% endcomment %}
        <label>Search: </label>
        <input type="text" onkeyup="searchfunction()" id="search" placeholder="Search with any credentials">
        <br>
        <table id="renewal_request_table">
            <thead>
                <tr id="table_row">
                    <th>Name</th>
                    <th>Email</th>
                    <th>Contact No.</th>
                    <th>Action</th>
                    
                </tr>
            </thead>
        {% comment %} This block is responsible for loading all the members recruited on that session and passes their id to the url as well as their data to the recruitee_details function {% endcomment %}
        {% for request in requests %}
            <tr>
                <td>{{ request.name }}</td>
                <td>{{ request.email_personal }}</td>
                <td>{{ request.contact_no }}</td>
                <td><a href="{% url 'membership_development_team:request_details' session_id request.id %}">View Details</a></td>
            </tr>
        {% endfor %}
        </table>
        <p id="no_data"></p>
        <script>
            function searchfunction(){
                let input,filter,table,tr,td,j;
                input=document.getElementById("search");
                filter=input.value.toUpperCase();
                table=document.getElementById("renewal_request_table");
                tr=table.getElementsByTagName("tr");
                
                for(j=0;j<tr.length;j++){
                    td=tr[j].getElementsByTagName("td");
                    message=document.getElementById("no_data");
        
                    if(td.length > 0){
                        if(td[0].innerHTML.toLocaleUpperCase().indexOf(filter)> -1 ||
                        td[1].innerHTML.toLocaleUpperCase().indexOf(filter)> -1 ||
                        td[2].innerHTML.toLocaleUpperCase().indexOf(filter)> -1 ||
                        td[3].innerHTML.toLocaleUpperCase().indexOf(filter)> -1){
                        tr[j].style.display="";
                        message.innerHTML="";
                    }
                            else{
                                tr[j].style.display="none";
                            }
                    
                    }        
                    if(td.length==0){
                        message.innerHTML="Member not found!";
                    }
                }
            }
        
        </script>
    </body>
</html>