{% load static %}
{% block navbar %}
<style>
    .nav a.active {
        color: #FFA300;
    }
    #notification{
        height: 450px;
        width: 300px;
        position: absolute;
        display: none;
        background-color: rgba(255, 255, 255, 0.304);
        border-radius: 10px;
        border: 2px solid rgb(227, 227, 227);
        backdrop-filter: blur(10px);
        top: 45px;
        right: 4%;
        box-shadow: -2px 2px 8px 0 black;
    }
    .msg-box{
        height: 420px;
        width: 296px;
        padding: 10px 10px 0px 10px;
        overflow-y: auto;
    }
    .msg{
        height: auto;
        width: 276px;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        border-radius: 4px;
        /* border: 1px solid black; */
        background-color: rgba(50, 50, 50, 0.304);
        padding: 10px;
        margin-bottom: 10px;
    }
    .msg:hover, .see-all:hover{
        cursor: pointer;
    }
    .bell-icon{
        color: #000000;
    }
    .bell-icon:hover{
        scale: 1.2;
    }
</style>
<!--This is scrip is to get the link of the current page and cross match it with the navlink to change colors-->
<script>
document.addEventListener("DOMContentLoaded", function () {
    // Get the current page's URL
    const currentPageUrl = window.location.href;
  
    // Find the links in the navigation bar
    const navLinks = document.querySelectorAll(".nav a");
  
    // Loop through the links and add a "active" class to the matching link
    navLinks.forEach(function (link) {
      if (link.href === currentPageUrl) {
        link.classList.add("active");
      }
    });
});
function show_ntfn(){
    var icon = document.querySelector(".bell-icon");
    const ntfn_content = document.getElementById("notification");
    if(ntfn_content.style.display === "block"){
        ntfn_content.style.display = "none";
        icon.style.color = "#000000";
    }else{
        ntfn_content.style.display = "block";
        icon.style.color = "#7878ff";
    }
}
function msg_read(msg_div){
    msg_div.style.backgroundColor = "rgba(200, 200, 200, 0.304)";
    msg_div.firstElementChild.value = "2";
    var hiddenInputs = document.querySelectorAll('.msg input');
    var val = 0;
    
    hiddenInputs.forEach(function(input) {
        if (input.getAttribute("value") === "1") {
            val++;
        }
    });
    
    var lbl = document.getElementById("nftn_lbl");
    lbl.textContent = val;
}
window.onload = function(){
    var divs = document.querySelectorAll(".msg");

    divs.forEach(function(msg_val){
        if(msg_val.firstElementChild.value == "2"){
            msg_val.style.backgroundColor = "rgba(200, 200, 200, 0.304)";
        }
    });

    var hiddenInputs = document.querySelectorAll('.msg input');
    var val = 0;
    
    hiddenInputs.forEach(function(input) {
        if (input.getAttribute("value") === "1") {
            val++;
        }
    });
    
    var lbl = document.getElementById("nftn_lbl");
    lbl.textContent = val;
};
</script>
<div class="app-header white box-shadow">
    <div class="navbar navbar-toggleable-sm flex-row align-items-center">
        <!-- Open side - Naviation on mobile -->
        <a data-toggle="modal" data-target="#aside" class="hidden-lg-up mr-3">
        <i class="material-icons">&#xe5d2;</i>
        </a>
        <!-- / -->
    
        <!-- Page title - Bind to $state's title -->
        <div class="mb-0 h5 no-wrap" ng-bind="$state.current.data.title" id="pageTitle"></div>
    
        <!-- navbar collapse -->
        <div class="collapse navbar-collapse" id="collapse">
        <!-- link and dropdown -->
        <ul class="nav navbar-nav mr-auto">
            <li class="nav-item dropdown">
                <a class="nav-link" href="{% url 'users:change_password' %}">
                <i class="fa fa-lock"></i>
                <span>Change Password</span>
                </a>
                <div ui-include="'../views/blocks/dropdown.new.html'"></div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link" href="{% url 'users:update_information' %}">
                <i class="fa fa-refresh"></i>
                <span>Update Profile</span>
                </a>
                <div ui-include="'../views/blocks/dropdown.new.html'"></div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link" href="{% url 'users:logoutUser' %}">
                <i class="fa fa-sign-out"></i>
                <span>Logout</span>
                </a>
                <div ui-include="'../views/blocks/dropdown.new.html'"></div>
            </li>
            
        </ul>
    
        <div ui-include="'../views/blocks/navbar.form.html'"></div>
        <!-- / -->
        </div>
        <!-- / navbar collapse -->
    
        <!-- navbar right -->
        <ul class="nav navbar-nav ml-auto flex-row">
        <li class="nav-item hidden-md-up">
            <a class="nav-link pl-2" data-toggle="collapse" data-target="#collapse">
            <i class="material-icons">more_horiz</i>
            </a>
        </li>
        <li class="nav-item dropdown pos-stc-xs" onclick="show_ntfn()">
            <a class="nav-link mr-2" href data-toggle="dropdown">
                <i class="material-icons bell-icon">&#xe7f4;</i>
                <span class="label label-sm up warn" id="nftn_lbl" value="4"></span>
            </a>
            <!-- <div ui-include="'../views/blocks/dropdown.notification.html'"></div> -->
        </li>
        <div id="notification">
            <div class="msg-box">
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="1" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="1" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="1" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
                <div class="msg" onclick="msg_read(this)">
                    <input type="hidden" id="hid-inp" value="2" data-namr="1">
                    <h6 style="font-weight: bold; font-size: 15px;">Notification from</h6>
                    <h6>10:53</h6>
                    <h6 style="top: 20px; font-size: 15px; margin-bottom: 0;">Subject of the new notification</h6>
                </div>
            </div>
            <div class="see-all" style="height: 30px; width: 296; display: flex; justify-content: center; align-items: center; border-top: 1px solid rgb(227, 227, 227);">See all</div>
        </div>
        <li class="nav-item dropdown">
            <a class="nav-link p-0 clear" href="{% url 'users:profile' %}">
            <span class="avatar w-32" style="border-radius: 50%;
            overflow: hidden;">
                <img src="{{ user_data.profile_picture }}" alt="user_profile" style="border-radius: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;">
                <i class="on b-white bottom"></i>
            </span>
            </a>
            <div ui-include="'../views/blocks/dropdown.user.html'"></div>
        </li>
        </ul>
        <!-- / navbar right -->
</div>
{% endblock navbar %}