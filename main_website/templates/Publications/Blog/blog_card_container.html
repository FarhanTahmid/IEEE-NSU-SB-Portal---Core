{% load static %}

<!--YOU MUST IMPORT THE blog.css IN THE HTML FILE YOU ARE USING THIS BLOCK. JS IS INTEGRATED IN THIS BLOCK -->

{% block blog_card_container %}

<style>
    .gdlr-blog-grid .excerpt-read-more{
        color: #002855;
    }
    .gdlr-blog-grid .excerpt-read-more:hover{
        color: #FFC72C;
    }
    .article-image {
        width: 100%; /* Make the image fill the container */
        height: 250px; /* Fix the image height to 250px */
        object-fit: cover; /* Maintain aspect ratio and cover the container */
      }
      .search_blog{
        width: 100%;
        max-width: 1140px;
        margin: 60px auto 30px auto;
        border: 2px solid #fecd13;
        border-radius: 10px;
        padding: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      }
      .search_blog input{
        width: 100%;
        height: 50px;
        padding: 0 10px;
        font-size: 18px;
      }
      @media screen and (max-width: 1200px) {
        .search_blog {
            width: 90%;
            max-width: 960px;
        }
    }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<!-- Search Section -->
<div class="search_blog">
    
    <input
    type="text"
    id="blogFilter"
    onkeyup="blogFilterFunction()"
    placeholder="Search by blog name.."
    title="Type in a name"
    />
</div>

<!--Blog CARD CONTAINER-->

<section class="blog">
    <div class="blog-container container" style="padding:0px; "> 

        <div class="row m-0 box-container" style="transition: .3s ease-in-out; ">
            {% for i in blogs %}
            <div style="border-radius: 7px;" class="col-lg-4 col-md-6 col-sm-12 mt-4 mx-0 gdlr-item gdlr-blog-grid gdlr-skin-box blog_box">
                <article id="post-2255"
                    class="post-2255 post type-post status-publish format-standard has-post-thumbnail hentry category-post-slider tag-blog tag-life-style" style="border: 1px solid black;">
                    <div class="gdlr-standard-style" style="height:500px;">
                        <div class="gdlr-blog-thumbnail">
                            <a href="{% url 'main_website:blog_description' i.pk %}"> <img
                                    class="article-image"
                                    src="media_files/{{i.blog_banner_picture}}"
                                    alt="" width="100%" /></a>
                        </div>

                        <div class="gdlr-blog-grid-content" style="overflow: hidden;">
                            <header class="post-header">
                                <div class="gdlr-blog-info">
                                    <div
                                        class="blog-info blog-date gdlr-skin-info">
                                        <span class="gdlr-sep">/</span><a
                                            href="{% url 'main_website:blog_description' i.pk %}">{{i.date}}</a></div>
                                    <div
                                        class="blog-info blog-author gdlr-skin-info">
                                        <span class="gdlr-sep">/</span>By <a
                                            href="{% url 'main_website:blog_description' i.pk %}" title="{{i.writer_name}}"
                                            rel="author">{{i.writer_name}}</a></div>
                                    <div class="clear"></div>
                                </div>

                                <h3 class="gdlr-blog-title blog_name"><a href="{% url 'main_website:blog_description' i.pk %}">{{i.title}}</a></h3>
                                <div class="clear"></div>
                            </header>
                            <!-- entry-header -->

                            <div class="description-container" style="display: -webkit-box;
                            overflow: hidden;
                            -webkit-box-orient: vertical;
                            text-overflow: ellipsis;
                            -webkit-line-clamp: 2;">
                                <p class="card-text">{{i.short_description | safe}}</p>
                            </div>
                            <a href="{% url 'main_website:blog_description' i.pk %}" class="excerpt-read-more">Read More</a>
                        </div>
                    </div>
                </article>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    var element = document.getElementById('gdlr-blog-title');
    var maxLength = 40; // Set your desired maximum length
  
    if (element.textContent.length > maxLength) {
        element.textContent = element.textContent.substring(0, maxLength) + '...';
    }
  </script>

<script>
    // BLOG SEARCH FUNCTION WITH NAME ONLY
    function blogFilterFunction() {
        let input, filter, container, blogs, blogTitle, i;
        input = document.getElementById("blogFilter");
        filter = input.value.toUpperCase();
        container = document.querySelector(".box-container");
        blogs = container.querySelectorAll(".blog_box");

        for (i = 0; i < blogs.length; i++) {
            blogTitle = blogs[i].querySelector(".gdlr-blog-title a");
            message = document.getElementById("no_data");

            if (blogTitle.innerHTML.toUpperCase().indexOf(filter) > -1) {
                blogs[i].style.display = "";
                message.innerHTML = "";
            } else {
                blogs[i].style.display = "none";
            }
        }

        // Display a message if no matching blogs are found
        let visibleBlogs = container.querySelectorAll(".blog_box[style='display: block;']");
        if (visibleBlogs.length === 0) {
            message.innerHTML = "Blog not found!";
        }
    }
</script>
{% endblock blog_card_container %}