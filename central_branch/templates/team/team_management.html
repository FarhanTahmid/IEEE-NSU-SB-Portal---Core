<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'data_access_table.css' %}">

    <title>Manage {{team_name}}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');

        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        body{
            background-image: linear-gradient(90deg, #67b8e4, #060c4d)
        }
        header{
            background-color: #050D3A;
        }
        .navbar li{
            list-style: none;
        }
        .navbar a{
            color: #fff;
            text-decoration: none;
        }
        .navbar{
            min-height: 70px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        .nav-menu{
            display: flex;
            gap: 20px;
        }
        .nav-link{
            transition: 0.3s ease;
        }
        .nav-link:hover{
            color: rgb(255, 183, 0);
        }
        .hamburger{
            display: none;
            cursor: pointer;
        }
        .bar{
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            -webkit-transition: all 0.3s ease-in-out;
            transition: all 0.3s ease-in-out;
            background-color: #fff;
        }
        @media(max-width: 1560px) {
            .hamburger{
                display: block;
            }
            .hamburger.active .bar:nth-child(2){
                opacity: 0;
            }
            .hamburger.active .bar:nth-child(1){
                transform: translateY(8px) rotate(45deg);
            }
            .hamburger.active .bar:nth-child(3){
                transform: translateY(-8px) rotate(-45deg);
            }
            .nav-menu{
                position: absolute;
                top: -1070px;
                left: 0;
                width: 100%;
                gap: 0;
                flex-direction: column;
                background-color: #050D3A;
                text-align: left;
                transition: 0.7s;
                padding: 0 20px;
            }
            .nav-item{
                margin: 16px 0;
            }
            .nav-menu.active{
                top: 70px;
            }
            .container{
                padding-top: 0px;
                transition: 0.8s;
            }
            .container.active{
                padding-top: 700px;
            }
        }

    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="#" class="nav-logo"><img src="logo.gif"  alt="IEEE_logo" width="40" height="40"></a>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Central Branch</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Event & Management</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Logistics</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Content</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Promotion</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Membership Development</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Website Development</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Media</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Graphics</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Finance</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Public Relation</a>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>
    <div class="container">
        <div class="justify-content-center">
            <h2>Current Team Members</h2>
            <div class="btn-group w-100 justify-content-center justify-content-center m-3" role="group" aria-label="Basic example">
              <button type="button" data-bs-toggle="modal" data-bs-target="#form_data2"  class="btn btn-success rounded m-1">Add New Member to Membership Development Team</button>
            </div>
            </div>
          <div class="container">
            <div class="row">
              <div class="col-xs-12">
                <div class="table-responsive" data-pattern="priority-columns">
                  <table class="table table-bordered">
                    
                    <thead>
                      
                      <tr>
                        <th data-priority="1" style="text-align:center;">Name</th>
                        <th style="text-align:center;">IEEE ID</th>
                        <th style="text-align:center;">NSU ID</th>
                        <th data-priority="2" style="text-align:center;">Current Position</th>
                        <th data-priority="3" style="text-align:center;">Email</th>
                        <th data-priority="3" style="text-align:center;">Contact</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                      {% for member in members %}
                      <tr>
                        <td><a style="text-decoration:none;color:yellow;" href="{% url 'membership_development_team:member_details' member.ieee_id %}">{{ member.name  }}</a></td>
                        <td>{{member.ieee_id}}</td>
                        <td>{{member.nsu_id}}</td>
                        <td>{{member.position}}</td>
                        <td>{{member.email_ieee}}</td>
                        <td>{{member.contact_no}}</td>
                        <td>
                          <form method="POST">
                            {% csrf_token %}
                                <input class="btn btn-danger" name="remove_member" type="submit" value="Remove Member">
                                <input type="hidden" name="remove_ieee_id" value={{member.ieee_id}}>
                            </form>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div><!--end of .table-responsive-->
                {% for messages in messages %}
                  <p class="text-white text-center">{{messages}}</p>
                {% endfor %}
              </div>
            </div>
          </div>
    
    
          </div>
          <h2>Access Control For Membership Development Team</h2>
          
          <div class="btn-group w-100 justify-content-center justify-content-center m-3" role="group" aria-label="Basic example">
            <button type="button" data-bs-toggle="modal" data-bs-target="#form_data"  class="btn btn-warning rounded m-1">Add New Member to Access MDT Data</button>
          </div>
          
          <div class="container">
            <div class="row">
              <div class="col-xs-12">
                <div class="table-responsive" data-pattern="priority-columns">
                  <table class="table table-bordered">
                    
                    <thead>
                      
                      <tr>
                        <th style="text-align:center;">IEEE ID</th>
                        <th data-priority="1" style="text-align:center;">Name</th>
                        <th data-priority="2" style="text-align:center;">Current Position</th>
                        <th data-priority="3" style="text-align:center;">Permission Criterias</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                      {% for data_access in data_access %}
                      <tr>
                        <td>{{data_access.ieee_id}}</td>
                        <td>{{data_access.ieee_id.name}}</td>
                        <td>{{data_access.ieee_id.position}}</td>
                        
                        <td>
                          <form method="POST">
                              {% csrf_token %}
                          
                            
    
                            {% if data_access.insb_member_details %}
                            <input type="checkbox" checked="True" class="checkbox" value="insb_member_details" name="insb_member_details">
                            <label for="insb_member_details">INSB Registered Member Details Permission
                            </label><br>
                            {% else %}
                            <input type="checkbox" class="checkbox" value="insb_member_details" name="insb_member_details">
                            <label for="insb_member_details">INSB Registered Member Details Permission</label><br>
                            {% endif %}
    
    
                            {% if data_access.recruitment_session %}
                            <input type="checkbox" checked="True" class="checkbox" value="recruitment_session" name="recruitment_session">
                            <label for="recruitment_session">Recruitment Data View Permission</label><br>
                            {% else %}
                            <input type="checkbox" class="checkbox" value="recruitment_session" name="recruitment_session">
                            <label for="recruitment_session">Recruitment Data View Permission</label><br>
                            {% endif %}
    
    
                            {% if data_access.recruited_member_details %}
                            <input type="checkbox" checked="True" class="checkbox" value="recruited_member_details" name="recruited_member_details">
                            <label for="recruited_member_details">Rectuited Member Details Permission</label><br>
                            {% else %}
                            <input type="checkbox" class="checkbox" value="recruited_member_details" name="recruited_member_details">
                            <label for="recruited_member_details">Rectuited Member Details Permission</label><br>
                            {% endif %}
    
    
                            {% if data_access.renewal_data_access %}
                            <input type="checkbox" checked="True" class="checkbox" value="renewal_data_access" name="renewal_data_access">
                            <label for="renewal_data_access">Membership Renewal Data Access Permission</label><br>
                            {% else %}
                            <input type="checkbox" class="checkbox" value="renewal_data_access" name="renewal_data_access">
                            <label for="renewal_data_access">Membership Renewal Data Access Permission</label><br>
                            {% endif %}
                            
                          </td>
                        
                        <td>
                                <input class="btn btn-warning" name="access_update" type="submit" value="Update">
                                <input class="btn btn-danger" name="access_remove" type="submit" value="Remove">
                                <input type="hidden" name="access_ieee_id" value={{data_access.ieee_id}}>
                            </form>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div><!--end of .table-responsive-->
                {% for message in messages %}
                  <p class="text-white text-center">{{message}}</p>
                {% endfor %}
              </div>
            </div>
          </div>
    
          {% comment %} Modals {% endcomment %}
          <div
          class="modal fade"
          id="form_data"
          data-bs-backdrop="static"
          data-bs-keyboard="false"
          tabindex="-1"
          aria-labelledby="staticBackdropLabel"
          aria-hidden="true"
        >
        <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                  <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">
                          Add Member to Membership Development Team Data Access
                      </h5>
                      <button
                          type="button"
                          class="btn-close"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                      ></button>
                  </div>
    
                <div class="search">
                    <br>
                    <label>Search</label>
                    <br>
                    <input onkeyup="searchfunction_data_access()" id="search" class="form-control mr-sm-2 w-100" type="text" placeholder="Search Members" aria-label="Search">
                </div>
    
                <form method="POST">
                  {% csrf_token %}
                  <div style="justify-content:center;">
                    <div class="scroll">
                        <table id="registered_member_table" class="insb_member_table">
                            <h3 style="text-align:center">Members</h3>
                            <thead>
                                <tr id="table_row">
                                    <th class="insb_member_table_head">Name</th>
                                    <th class="insb_member_table_head">IEEE ID</th>
                                    <th class="insb_member_table_head">Team</th>
                                    <th class="insb_member_table_head">Current Position</th>
                                    <th class="insb_member_table_head">E-mail</th>
                                    <th class="insb_member_table_head">Select Member</th>
                                    
                                </tr>
                            </thead>
                        {% comment %} This block is responsible for loading all the members recruited on that session and passes their id to the url as well as their data to the recruitee_details function {% endcomment %}
                        {% for member in insb_members %}
                            <tr>
                                <td class="insb_member_table_data">{{ member.name }}</td>
                                <td class="insb_member_table_data">{{ member.ieee_id }}</td>
                                <td class="insb_member_table_data">{{ member.team }}</td>
                                <td class="insb_member_table_data">{{ member.position }}</td>
                                <td class="insb_member_table_data">{{ member.email_ieee }}</td>
                                <td class="insb_member_table_data">
                                    <input type="checkbox" id="select" name="member_select" value={{member.ieee_id}}>
                                </td>
                            </tr>
                        {% endfor %}
                        </table>
                        <p  id="no_data1" style="text-align:center;"></p>
                    </div>
                </div>
                  <div class="modal-footer">
                      <button
                          type="button"
                          class="btn btn-secondary"
                          data-bs-dismiss="modal"
                      >
                          Close
                      </button>
                      <input
                          type="submit"
                          class="btn btn-success"
                          data-bs-dismiss="modal"
                          name="update_data_access_member"
                          value="Update"
                      >
                  </div>
                </form>
              </div>
        </div>
      </div>
    </div>
    <script>
        const hamburger = document.querySelector(".hamburger");
        const navMenu = document.querySelector(".nav-menu");
        const container = document.querySelector(".container");

        hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            navMenu.classList.toggle("active");
            container.classList.toggle("active");
        })

        document.querySelectorAll(".navlink").forEach(n => n.addEventListener("click", () => {
            hamburger.classList.remove("active");
            navMenu.classList.remove("active");
            container.classList.toggle("active");
        }))
    </script>
</body>
</html>