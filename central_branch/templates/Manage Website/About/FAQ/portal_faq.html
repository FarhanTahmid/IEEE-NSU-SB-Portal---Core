
{% block about_base %}
{% include "Manage Website/About/about_base.html" %}
{% endblock about_base %}
{% block manage_ieee_bangladesh_section %}
{% load static %}


<!-- CKEditor CDN -->
<script src="https://cdn.ckeditor.com/4.17.0/standard-all/ckeditor.js"></script>

<style>
    .circle-btn {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 45px; /* Set minimum width */
        height: 45px; /* Set minimum height */
        background-color: transparent; /* Set to transparent or any other color for the inside */
        border: 2px solid #78BE20; /* Border color is green */
        border-radius: 50%;
        color: #78BE20; /* Text color is green */
        font-size: 24px; /* Adjust the font size as needed */
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s; /* Add smooth transition effect */
    }

    .circle-btn:hover {
        background-color: #78BE20; /* Hover background color is green */
        color: #fff; /* Hover text color is white */
    }

    .plus-sign::before {
        content: '+';
    }
    .faq-set {
        margin-top: 40px; /* Adjust the margin as needed */
    }

    @media only screen and (max-width: 768px) {
      
        .custom-file {
            margin-bottom: 10px;
        }
      }
  
      #gallery-selected-images-container {
        max-width: 100%; /* Set the maximum width for the image container */
      }
      
      #gallery-selected-images {
        width: 200px; /* Set the width to 100% */
        height: auto; /* Set the height to 150px */
        object-fit: cover; /* Maintain aspect ratio and cover the container */
        margin-top:10px;
      }
  
      .image-container-item{
        width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        transition: box-shadow 0.3s ease;
      }
  
      .image-container-item:hover {
          box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
      }
  
      .image-container {
        position: relative;
        display: inline-block;
      }
  
      .cross-button {
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        background-color: white; /* Set the background color to white */
        border: none;
        padding: 0;
        width: 25px; /* Set the width and height to create a circle */
        height: 25px;
        border-radius: 50%; /* Make it a circle */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem; /* Adjust font size */
        color: black; /* Set the initial color */
        z-index: 2;
        transition: background-color 0.3s ease, color 0.3s ease; /* Add transitions for color and background-color changes */
        line-height: 1; /* Ensure line height does not affect vertical alignment */
      }
    
    
      .cross-button:hover {
          color: gray; /* Change color on hover */
      }


</style>

<body>
    <div class="app" id="app">
        <div ui-view class="app-body" style="justify-content:center; margin-left:27%; margin-right:15%;" id="view">

            <h4 style="justify-content:center;text-align:center;margin-bottom:15px;"><b>Question Answers </b></h2>
            
            <!--Messages-->
            <div style="justify-content:center; text-align:center;">
                {% if messages %}
                    {% for message in messages %}
                        <h4 {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</h4>
                    {% endfor %}
                {% endif %}
            </div>
            <!--Messages End-->
            
            <div class="container">          
                <div class="box">
                    <br>
                    <form id="myForm" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="box-body">
                    
                            <div class="form-group row">
                                <label for="captions" class="col-sm-3 form-control-label">Add Categories:</label>
                                <div class="col-sm-7">
                                    <!-- Add input field for captions here if needed -->
                                </div>
                                <div class="col-sm-2 d-flex align-items-center justify-content-center">
                                    <button type="button" class="circle-btn plus-sign" data-toggle="modal" data-target="#AddCategoryModal"></button>
                                </div>
                            </div>
                            
                            <hr>
                        <div id="captions-container" class="mt-3">
                                <label class="mb-0">Categories:</label> 
                                {% for title in all_titles%}
                                <div class="row container-fluid bg-light mt-3" style="margin:auto;">
                                    <div class="col-sm-11">
                                        <a href="#" class="btn btn-link btn-block" data-toggle="modal" data-target="#EditCaptionModal{{title.pk}}">{{title.title}}</a>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center justify-content-center">
                                        <button type="button" class="close" aria-label="Close" data-toggle="modal" data-target="#ConfirmDeleteModal2"  onclick="openModal('{{title.pk}}')">âœ–</button>
                                    </div>
                                </div>
                                {% endfor %}
                                

                                
                            </div>
            
                            <br>
                            <div class="footer" style="position:right;">
                            </div>
                        </div>
        
                    
                    </form> 
                    {% comment %} <form id="myForm" method="POST" enctype="multipart/form-data">

                    </form> {% endcomment %}
                    <div class="modal fade" id="ConfirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="ConfirmDeleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-top" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form method="POST">
                                <div class="modal-body">
                                    
                                        {% csrf_token %}
                                        <p><input id="category_id_delete" name="category_id_delete" type="hidden"></p>
                                        <p><input id="question_answer_id_delete" name="question_answer_id_delete" type="hidden"></p>
                                        Are you sure you want to delete this ?
                                 
                                </div>
                                <div class="modal-footer">
                                    <input type="submit" class="btn btn-outline-danger" value="Confirm" name="faq_question_answer_delete">
                                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                            </div>
                        </div>

                    </div>
                    <div class="modal fade" id="ConfirmDeleteModal2" tabindex="-1" role="dialog" aria-labelledby="ConfirmDeleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-top" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form method="POST">
                                <div class="modal-body">
                                    
                                        {% csrf_token %}
                                        <p><input id="delete_category" name="delete_category" type="hidden"></p>
                                        Are you sure you want to delete this category?
                                 
                                </div>
                                <div class="modal-footer">
                                    <input type="submit" class="btn btn-outline-danger" value="Confirm" name="category_delete">
                                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
                    
                <div>
            </div>

         
            <!-- Updated Modal for adding captions -->
            <div class="modal fade" id="AddCategoryModal" tabindex="-1" role="dialog" aria-labelledby="AddCategoryModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddCategoryModalLabel">Add Category Name:</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form method="POST">
                                {% csrf_token %}
                                
                                <div class="form-group">
                                    <label>Category: </label> 
                                        <input
                                            placeholder="Title"
                                            class="form-control"
                                            type="text"
                                            autocomplete="off"
                                            required
                                            name="category_title" 
                                        />
                                    <br>
                                    
                                    
                                </div>

                        </div>
                        <div class="modal-footer">
                            <!-- Change the button label and name attribute -->
                            <input type="submit" class="btn btn-outline-success txt-success buttons" name="add_category" value="Add">
                            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>



            {% for key,value in saved_question_answers.items %}
            <div class="modal fade" id="EditCaptionModal{{key.pk}}" tabindex="-1" role="dialog" aria-labelledby="EditCaptionModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editCaptionModalLabel{{key.pk}}">Edit Category</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <!-- Display existing caption in a textarea for editing -->
                            <form method="POST" id="form-1">
                                {% csrf_token %}
                                <div class="form-group">
                                    <label>Name: </label> 
                                        <input
                                            placeholder="Title"
                                            class="form-control"
                                            type="text"
                                            autocomplete="off"
                                            required
                                            name="saved_title"
                                            value = "{{key.title}}"
                                        />
                                    <br>
                                
                                    <label for="captions" class="col-sm-3 form-control-label">Add FAQ:</label>
                                    <div class="row">
                                        <div class="col-sm-10">
                                            <!-- Add input field for captions here if needed -->
                                        
                                        </div>
                                        <div class="col-sm-2 d-flex align-items-center justify-content-center">
                                            <button type="button" id="addFieldsBtn{{key.id}}" class="circle-btn plus-sign" ></button>
                                        </div>    
                                    
                                    </div>
                                    {% if value|length > 0 %}
                                        {% for question_answer in value %}
                                        <div class="faq_container" id="container{{key.id}}">
                                            <div class="faq-set {{key.id}}">
                                                <label for="question">Question:</label>
                                                <input
                                                    placeholder="Title"
                                                    class="form-control"
                                                    type="text"
                                                    autocomplete="off"
                                                    required
                                                    name="faq_question"
                                                    id="question"
                                                    value="{{question_answer.question}}"
                                                />
                                                <br>
                                                <label for="answer">Answer:</label>
                                                <textarea id="answer" class="form-control" rows="3" name="faq_question_answer">{{question_answer.answer|default:""}}</textarea>
                                                <input type = "hidden"  id="category_id" name="category_id" value="{{key.id}}">
                                                <input type = "hidden"   id="delete_FAQ"  name="delete_FAQ" value="{{question_answer.pk}}">
                                                <hr>
                                                <button type="button" class="btn btn-danger deleteBtn" data-toggle="modal" data-target="#ConfirmDeleteModal"  onclick="deleteFAQ('{{key.id}}','{{question_answer.pk}}')">Delete</button>
                                            </div>
                                        
                                    
                                        </div>
                                        {% endfor %}
                                    {% else %}
                                    <div class="faq_container" id="container{{key.id}}">
                                        <div class="faq-set {{key.id}}">
                                            <label for="question">Question:</label>
                                            <input
                                                placeholder="Title"
                                                class="form-control"
                                                type="text"
                                                autocomplete="off"
                                                required
                                                name="faq_question"
                                                id="question"
                                                value="{{question_answer.question}}"
                                            />
                                            <br>
                                            <label for="answer">Answer:</label>
                                            <textarea id="answer" class="form-control" rows="3" name="faq_question_answer">{{question_answer.answer|default:""}}</textarea>
                                            <input type = "hidden" value="{{key.pk}}" name="category_id">
                                            <input type = "hidden" value="{{question_answer.pk}}" name="delete_id">
                                            <hr>
                                        </div>
                                    
                                
                                    </div>
                                    {% endif %}

                                </div>
                                <div class="modal-footer">
                                    <input type="submit" name = "update_faq" class="btn btn-outline-primary txt-primary buttons" value="Update">
                                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}            
          

            <!-- Confirmation modal for delete -->
            


            
            

        </div>
    </div>

</body>
<script>
    function openModal(id) {
        // Set data in the modal
        var inputElement = document.getElementById('delete_category');    
        inputElement.value=id;
    }
    function deleteFAQ(id,id2) {
        // Set data in the modal
        var inputElement = document.getElementById('category_id_delete');    
        inputElement.value=id;
        var inputElement2 = document.getElementById('question_answer_id_delete'); 
        inputElement2.value = id2;
    }
</script>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    {% for key,value in saved_question_answers.items %}
    document.getElementById('addFieldsBtn{{key.id}}').addEventListener('click', function() {
        // Create new question and answer fields
        var faqSet = document.createElement('div');
        faqSet.className = 'faq-set {{key.id}}';

        var newQuestionLabel = document.createElement('label');
        newQuestionLabel.textContent = 'Question:';
        newQuestionLabel.htmlFor = 'question';

        var newQuestion = document.createElement('input');
        newQuestion.type = 'text';
        newQuestion.className = 'form-control';
        newQuestion.placeholder = 'Title';
        newQuestion.id = 'question';
        newQuestion.name = 'faq_question';

        var newAnswerLabel = document.createElement('label');
        newAnswerLabel.textContent = 'Answer:';
        newAnswerLabel.htmlFor = 'answer';

        var newAnswer = document.createElement('textarea');
        newAnswer.className = 'form-control';
        newAnswer.rows = '3';
        newAnswer.id = 'answer';
        newAnswer.name = 'faq_question_answer';


        var confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        
        
        // Append new fields and labels to the faq-set container
        faqSet.appendChild(newQuestionLabel);
        faqSet.appendChild(newQuestion);
        faqSet.appendChild(document.createElement('br'));
        faqSet.appendChild(newAnswerLabel);
        faqSet.appendChild(newAnswer);
        faqSet.appendChild(document.createElement('hr'));

        // Append the faq-set to the main container
        document.getElementById('container{{key.id}}').appendChild(faqSet);
    });
    {% endfor %}
</script>

 <!-- Add Bootstrap JS and Popper.js scripts here -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
 {% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  {% endcomment %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


{% comment %} 
<script>
    $(document).ready(function () {
        // Handle the click event for the "Cancel" button in the inner modal
        $('#confirmationModal .closeChild').on('click', function () {
            $('#confirmationModal').modal('hide'); // Hide the inner modal
            $('body').removeClass('modal-open'); // Remove the modal-open class from the body
            $('.modal-backdrop').remove(); // Remove the modal backdrop
        });

        // Handle the hidden.bs.modal event for the inner modal
        $('#confirmationModal').on('hidden.bs.modal', function () {
            $('body').addClass('modal-open'); // Restore the modal-open class to the body
        });
    });
</script> {% endcomment %}
{% endblock manage_ieee_bangladesh_section %}